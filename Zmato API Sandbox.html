<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bujumbura Data</title>
</head>

<body>

    <!-- 
NOTES
Zomato API
user-key:2acf625e70fd25f7205fda31a0f6cb15

Google API
AIzaSyAE2CIuMnHiuUN7XLs9fRiATGN1gD-t0LY

https://developers.zomato.com/api/v2.1/categories?apikey=2acf625e70fd25f7205fda31a0f6cb15 -->

    <!-- https://developers.zomato.com/api/v2.1/search?apikey=2acf625e70fd25f7205fda31a0f6cb15&lat=40.730511299999996&lon=-74.065955&radius=3000 -->

    <!-- Restaurant name 
URL
Address 
image
Rating -->

    <!-- Retrieved data will be dumped here -->
    <div class="restaurantName"></div>
    <div class="photos"></div>
    <div class="timings"></div>
    <div class="phoneNumbers"></div>
    <div class="url"></div>
    <div class="address"></div>
    <div class="rating"></div>
    <div class="image"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        var baseURL = "https://developers.zomato.com/api/v2.1/search?"

        // This is our API key. Add your own API key between the ""
        var APIKey = "apikey=2acf625e70fd25f7205fda31a0f6cb15&";
        var lat = 40.730511299999996;
        var lng = -74.065955;
        var meters = 1600;

        // var searchCategory = s;

        // Here we are building the URL we need to query the database
        var queryURL = "https://developers.zomato.com/api/v2.1/search?" + APIKey + "&lat=" + lat + "&lon=" + lng + "&" + "radius=" + meters + "&sort=real_distance";

        // We then created an AJAX call
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function(response) {
            // Loop through 20 results of i
            // grab their location, images, phone number, timings(lucnh, dinner, (sun, sat), breakfast, etc... )
            // Pull the restaurant images

            var results = response.restaurants;
            console.log(results);

            for (var i = 0; i < results.length; i++) {
                var restaurantName = $('<h3>').text("Name: " + results[i].restaurant.name);
                // for now include the photo URL since there is no specific photo listing
                var photoURL = $('<h3>').text("Photos: " + results[i].restaurant.photos_url);
                var timings = $('<h3>').text("Timings: " + results[i].restaurant.timings);
                var phoneNumber = $('<h3>').text("Phone Number: " + results[i].restaurant.phone_numbers);
                var websiteURL = $('<h4>').text("Website: " + results[i].restaurant.url);
                var address = $('<h4>').text("Address: " + results[i].restaurant.location.address);
                var rating = $('<h4>').text('Rating: ' + results[i].restaurant.user_rating.aggregate_rating);

                $('.restaurantName').append(restaurantName);
                $('.photos').append(photoURL);
                $(".timings").append(timings);
                $('.phoneNumbers').append(phoneNumber);
                $('.url').append(websiteURL);
                $('.address').append(address);
                $('.rating').append(rating);
            }

            // $(".restaurantName").text("Name: " + response.restaurants[0].restaurant.name);
            // $(".url").text("Website: " + response.restaurants[0].restaurant.url);
            // $(".address").text("Address: " + response.restaurants[0].restaurant.location.address);
            // $(".rating").text("Rating: " + response.restaurants[0].restaurant.user_rating.aggregate_rating);

            // Create CODE HERE to Log the queryURL
            // console.log(queryURL);
            // Create CODE HERE to log the resulting object
            console.log(response);
            console.log("Name: " + response.restaurants[0].restaurant.name);
            console.log("Website: " + response.restaurants[0].restaurant.url);
            console.log("Address: " + response.restaurants[0].restaurant.location.address);
            console.log("Rating: " + response.restaurants[0].restaurant.user_rating.aggregate_rating);

        });
    </script>
</body>

</html>